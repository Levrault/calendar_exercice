<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/YearForm/YearForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/YearForm/YearForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { PureComponent } from 'react';
import classnames from 'classnames';
import PropTypes from 'prop-types';
import styles from './YearForm.css';

/**
 * Get calendar by year
 * @class YearForm
 * @param {function} fetchAll
 * @param {function} fetch
 * @param {number} min
 * @param {number} max
 * @param {any} ids
 */
class YearForm extends PureComponent {
  /**
   * @constructor
   * @param {object} props
   */
  constructor (props) {
    super(props);
    this.state = {
      value: props.min
    };
  }

  /**
   * fetch data
   */
  componentDidMount () {
    this.props.fetchAll();
  }

  /**
   * Fetch an year
   * @param {object} prevProps
   * @param {object} prevState
   */
  componentDidUpdate (prevProps, prevState) {
    // value is updated
    const { value } = this.state;
    if (value !== prevState.value) {
      this.fetchData(value);
    }

    // first fetching
    if (prevProps.ids !== this.props.ids) {
      this.fetchData(value);
    }
  }

  /**
   * fetch data
   * @param {number} value
   */
  fetchData = (value) => {
    const { ids, fetch } = this.props;
    const year = ids.find(elem => elem.year === value);
    if (year &amp;&amp; year.id) {
      fetch(year.id);
    }
  }

  /**
   * @param {number} value
   * @returns {function}
   */
  updateValue = (value) => () => {
    const { min, max } = this.props;

    // if value are in our range
    if (value >= min &amp;&amp; value &lt;= max) {
      this.setState({
        value
      });
    }
  }

  /**
   * @returns {node}
   */
  render () {
    const { min, max, ids } = this.props;
    const { value } = this.state;

    // @todo set a real loader
    if (!ids.length) return &lt;span> Loading &lt;/span>;

    const leftChevronClassName = classnames(styles.button, {
      [styles.inactive]: value === min
    });
    const rightChevronClassName = classnames(styles.button, {
      [styles.inactive]: value === max
    });
    return (
      &lt;form className={styles.profileForm}>
        &lt;span className={styles.countdown}>

          &lt;button className={leftChevronClassName} type="button" onClick={this.updateValue(value - 1)}>
            &lt;i className="material-icons">chevron_left&lt;/i>
          &lt;/button>

          &lt;input className={styles.input} type="number" value={value} readOnly />

          &lt;button className={rightChevronClassName} type="button" onClick={this.updateValue(value + 1)}>
            &lt;i className="material-icons">chevron_right&lt;/i>
          &lt;/button>

        &lt;/span>
      &lt;/form>
    );
  }
}

YearForm.propTypes = {
  fetchAll: PropTypes.func.isRequired,
  fetch: PropTypes.func.isRequired,
  min: PropTypes.number,
  max: PropTypes.number,
  ids: PropTypes.any
};

YearForm.defaultProps = {
  min: 2018,
  max: 2019
};

export default YearForm;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="Calendar.html">Calendar</a></li><li><a href="ColorPalette.html">ColorPalette</a></li><li><a href="Day.html">Day</a></li><li><a href="EventForm.html">EventForm</a></li><li><a href="EventShow.html">EventShow</a></li><li><a href="Month.html">Month</a></li><li><a href="YearForm.html">YearForm</a></li></ul><h3>Global</h3><ul><li><a href="global.html#About">About</a></li><li><a href="global.html#CalendarButton">CalendarButton</a></li><li><a href="global.html#ColorButton">ColorButton</a></li><li><a href="global.html#colorChange">colorChange</a></li><li><a href="global.html#ColorInputField">ColorInputField</a></li><li><a href="global.html#dayReducer">dayReducer</a></li><li><a href="global.html#daySelector">daySelector</a></li><li><a href="global.html#deleteEvent">deleteEvent</a></li><li><a href="global.html#Error">Error</a></li><li><a href="global.html#EventButton">EventButton</a></li><li><a href="global.html#eventCreated">eventCreated</a></li><li><a href="global.html#eventDeleted">eventDeleted</a></li><li><a href="global.html#eventFormDeleteBegin">eventFormDeleteBegin</a></li><li><a href="global.html#eventFormDeleteError">eventFormDeleteError</a></li><li><a href="global.html#eventFormDeleteSuccess">eventFormDeleteSuccess</a></li><li><a href="global.html#eventFormReducer">eventFormReducer</a></li><li><a href="global.html#eventFormReset">eventFormReset</a></li><li><a href="global.html#eventFormSelector">eventFormSelector</a></li><li><a href="global.html#eventFormSubmitBegin">eventFormSubmitBegin</a></li><li><a href="global.html#eventFormSubmitError">eventFormSubmitError</a></li><li><a href="global.html#eventFormSubmitSuccess">eventFormSubmitSuccess</a></li><li><a href="global.html#eventsInit">eventsInit</a></li><li><a href="global.html#eventsReducer">eventsReducer</a></li><li><a href="global.html#eventsSelector">eventsSelector</a></li><li><a href="global.html#fetch">fetch</a></li><li><a href="global.html#fetchAll">fetchAll</a></li><li><a href="global.html#Link">Link</a></li><li><a href="global.html#Loader">Loader</a></li><li><a href="global.html#Main">Main</a></li><li><a href="global.html#mapStateToProps">mapStateToProps</a></li><li><a href="global.html#Message">Message</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#NavbarRouter">NavbarRouter</a></li><li><a href="global.html#onSelected">onSelected</a></li><li><a href="global.html#PageNotFound">PageNotFound</a></li><li><a href="global.html#post">post</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#Title">Title</a></li><li><a href="global.html#WeekHeader">WeekHeader</a></li><li><a href="global.html#yearFetchAllBegin">yearFetchAllBegin</a></li><li><a href="global.html#yearFetchAllError">yearFetchAllError</a></li><li><a href="global.html#yearFetchAllSuccess">yearFetchAllSuccess</a></li><li><a href="global.html#yearFetchBegin">yearFetchBegin</a></li><li><a href="global.html#yearFetchError">yearFetchError</a></li><li><a href="global.html#yearFetchSuccess">yearFetchSuccess</a></li><li><a href="global.html#yearFormReducer">yearFormReducer</a></li><li><a href="global.html#yearSelector">yearSelector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Sep 21 2018 13:49:33 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
